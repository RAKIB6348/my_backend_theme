/* =========================
   GLOBAL THEME COLORS
   ========================= */
$brand: #7b4a9a;          /* main brand color */
$brand_dark: #653a80;     /* hover / active */
$navbar_bg: #7b4a9a;      /* top bar */
$sidebar_bg: #2b1638;     /* optional dark sidebar */
$text_on_dark: #ffffff;
$text_on_light: #111827;

/* Ensure components that rely on Odoo's CSS vars inherit the brand color */
:root {
  /* Navbar variables */
  --o-navbar-bg: #{$navbar_bg};
  --o-navbar-color: #{$text_on_dark};
  --o-navbar-hover-color: #{$text_on_dark};
  --o-navbar-hover-bg: #{rgba($text_on_dark, 0.12)};
  --o-navbar-brand-color: #{$text_on_dark};
  --o-navbar-brand-hover-color: #{$text_on_dark};
  
  /* Brand color variables for all modules */
  --primary: #7b4a9a;
  --o-brand-primary: #7b4a9a;
  --o-brand-odoo: #7b4a9a;
  --o-enterprise-primary-color: #7b4a9a;
  --o-community-color: #7b4a9a;
  --o-color-primary: #7b4a9a;
  
  /* Button variables */
  --btn-primary-bg: #7b4a9a;
  --btn-primary-border: #7b4a9a;
  
  /* Link variables */
  --link-color: #7b4a9a;
  --link-hover-color: #653a80;
  
  /* Bootstrap override */
  --bs-primary: #7b4a9a;
  --bs-primary-rgb: 123, 74, 154;
}

body,
.o_web_client,
.o_form_view,
.o_list_view,
.o_kanban_view,
.o_control_panel {
  color: #111111 !important;
}

/* =========================
   TOP NAVBAR
   ========================= */
// .o_main_navbar {
//   background-color: $navbar_bg !important;
//   border-bottom: 0 !important;
// }



/* optional: menu items inside navbar */
// .o_main_navbar .o_nav_entry,
// .o_main_navbar .o_menu_sections {
//   background-color: $navbar_bg !important;
// }



.o_main_navbar,
.o_main_navbar .o_menu_sections,
.o_main_navbar .o_nav_entry,
.o_main_navbar .o_menu_brand,
.o_main_navbar .o_menu_apps,
.o_main_navbar .o_navbar_apps_menu,
.o_main_navbar .o_menu_systray,
.o_main_navbar .dropdown-toggle {
  background-color: $navbar_bg !important;
  border-bottom: 0 !important;
}

/* Text & icons inside navbar */
.o_main_navbar,
.o_main_navbar a,
.o_main_navbar .dropdown-toggle,
.o_main_navbar .o_nav_entry,
.o_main_navbar .o_menu_sections,
.o_main_navbar .o_menu_systray i,
.o_main_navbar .fa {
  color: #ffffff !important;
}

/* Hover state */
.o_main_navbar a:hover,
.o_main_navbar .dropdown-toggle:hover {
  background-color: darken($navbar_bg, 6%) !important;
}

/* =========================
   APPS MENU (grid dropdown)
   ========================= */
.o_navbar_apps_menu {
  background-color: $navbar_bg !important;
}

.o_navbar_apps_menu a {
  color: #ffffff !important;
}

/* =========================
   SYSTRAY (right icons)
   ========================= */
.o_menu_systray,
.o_menu_systray > li {
  background-color: $navbar_bg !important;
}




/* Universal navbar color fix - target all elements */
nav.o_main_navbar,
nav.o_main_navbar a,
nav.o_main_navbar button,
nav.o_main_navbar span,
nav.o_main_navbar div,
nav.o_main_navbar li,
nav.o_main_navbar .nav-link,
nav.o_main_navbar .navbar-nav a,
nav.o_main_navbar .o_menu_sections a,
header.o_main_navbar,
header.o_main_navbar a,
header.o_main_navbar button,
header.o_main_navbar span,
header.o_main_navbar div,
.o_main_navbar > *,
.o_main_navbar a:not(.dropdown-item):not(.dropdown-menu *),
.o_main_navbar button:not(.dropdown-menu *),
.o_main_navbar span:not(.dropdown-menu *),
.o_main_navbar i:not(.dropdown-menu *),
.o_main_navbar .fa:not(.dropdown-menu *) {
  color: $text_on_dark !important;
}

/* =========================
   NAVBAR DROPDOWN FIX (IMPORTANT)
   ========================= */
/* Hover state for navbar items (before dropdown opens) */
.o_main_navbar .nav-item:hover,
.o_main_navbar .o_menu_sections > li:hover,
.o_main_navbar button:hover,
.o_main_navbar .dropdown-toggle:hover {
  background-color: rgba(255, 255, 255, 0.12) !important;
}

.o_main_navbar .dropdown-menu {
  background-color: #ffffff !important;
}

.o_main_navbar .dropdown-menu a,
.o_main_navbar .dropdown-menu .dropdown-item {
  color: $text_on_light !important;
}

.o_main_navbar .dropdown-menu .dropdown-item:hover {
  background-color: rgba(123, 74, 154, 0.12) !important;
  color: $text_on_light !important;
}

.o_main_navbar .dropdown-menu .dropdown-item.active,
.o_main_navbar .dropdown-menu .dropdown-item:active {
  background-color: $brand !important;
  color: #ffffff !important;
}

/* =========================
   PRIMARY BUTTONS (All Modules)
   ========================= */
.btn-primary,
.o_form_button_save,
.o_form_button_edit,
.btn.btn-primary,
.o_button_primary,
button.btn-primary,
a.btn-primary,
.o_web_client .btn-primary,
.oe_button.oe_highlight,
.o_statusbar_buttons .btn-primary {
  background-color: $brand !important;
  border-color: $brand !important;
  color: #ffffff !important;
}

.btn-primary:hover,
.o_form_button_save:hover,
.o_form_button_edit:hover,
.btn.btn-primary:hover,
.o_button_primary:hover,
button.btn-primary:hover,
a.btn-primary:hover,
.oe_button.oe_highlight:hover {
  background-color: $brand_dark !important;
  border-color: $brand_dark !important;
  color: #ffffff !important;
}

.o_form_button_save {
  background-color: transparent !important;
  border-color: transparent !important;
  color: $brand !important;
}

.o_form_button_save:hover {
  background-color: transparent !important;
  border-color: transparent !important;
  color: $brand_dark !important;
}

/* =========================
   LINKS + ACTIVE HIGHLIGHTS (All Modules)
   ========================= */
a:not(.dropdown-item),
.btn-link,
.o_web_client a:not(.dropdown-item),
.o_form_view a:not(.dropdown-item),
.o_list_view a:not(.dropdown-item),
.oe_link {
  color: $brand !important;
}

a:not(.dropdown-item):hover,
.btn-link:hover,
.o_web_client a:not(.dropdown-item):hover,
.oe_link:hover {
  color: $brand_dark !important;
}

/* Active list/menu rows */
.dropdown-item.active,
.list-group-item.active,
.o_data_row.o_selected,
.o_list_view .o_data_row.o_selected,
.ui-state-active,
.o_kanban_record.o_selected {
  background-color: rgba(123, 74, 154, 0.18) !important;
  color: inherit !important;
}

/* =========================
   BADGES / TAGS (All Modules)
   ========================= */
.badge.bg-primary,
.badge.text-bg-primary,
.badge-primary,
.label-primary,
.o_tag,
.o_tag_color_0 {
  background-color: $brand !important;
  color: #ffffff !important;
}

/* =========================
   FORM & LIST ACCENTS
   ========================= */
.o_field_widget .o_input,
.o_input,
.o_field_widget textarea,
.o_field_widget select {
  border: none !important;
  border-bottom: 2px solid rgba(123, 74, 154, 0.35) !important;
  border-radius: 0;
  background-color: transparent !important;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

.o_field_widget .o_input:hover,
.o_input:hover,
.o_field_widget textarea:hover,
.o_field_widget select:hover {
  border-bottom-color: rgba(123, 74, 154, 0.6) !important;
}

.o_field_widget input:focus,
.o_input:focus {
  border-bottom-color: $brand !important;
  box-shadow: inset 0 -1px 0 0 $brand !important;
}

.o_field_widget .o_input[readonly],
.o_field_widget input[readonly],
.o_field_widget textarea[readonly],
.o_field_widget select[readonly],
.o_field_widget .o_input:disabled,
.o_field_widget input:disabled,
.o_field_widget textarea:disabled,
.o_field_widget select:disabled {
  border-bottom-color: rgba(123, 74, 154, 0.2) !important;
  color: rgba(17, 24, 39, 0.7) !important;
  opacity: 0.8;
}

.o_field_widget input::placeholder,
.o_field_widget textarea::placeholder,
.o_input::placeholder {
  color: rgba(101, 58, 128, 0.7) !important;
}

.o_form_label {
  color: $brand_dark !important;
  font-weight: 600;
}

/* =========================
   FIX: Control Panel / Breadcrumb bar theme
   ========================= */
.o_control_panel {
  background: #ffffff !important;
  border-bottom: 1px solid rgba(123, 74, 154, 0.15) !important;
}

/* Top strip inside control panel (breadcrumb area) */
.o_control_panel .o_cp_top {
  background: rgba(123, 74, 154, 0.06) !important;
}

/* Breadcrumb text + links */
.o_control_panel .breadcrumb,
.o_control_panel .breadcrumb a {
  color: #111827 !important;
}

.o_control_panel .breadcrumb a:hover {
  color: #653a80 !important;
}

.o_control_panel .breadcrumb-item.active {
  color: #7b4a9a !important;
  font-weight: 600;
}

/* Star / back / action icons near breadcrumb */
.o_control_panel .o_cp_top .btn,
.o_control_panel .o_cp_top .btn i,
.o_control_panel .o_cp_top .fa {
  color: #7b4a9a !important;
}

.o_control_panel .o_cp_top .btn:hover {
  background: rgba(123, 74, 154, 0.10) !important;
}

/* =========================
   SIDEBAR / APP SWITCHER
   ========================= */
.o_menu_sidebar {
  background: $sidebar_bg !important;
  color: $text_on_dark !important;
}

.o_menu_sidebar .o_menu_sections a {
  color: rgba(255, 255, 255, 0.85) !important;
}

.o_menu_sidebar .o_menu_sections a:hover,
.o_menu_sidebar .o_menu_sections li.active > a {
  background: rgba(255, 255, 255, 0.08) !important;
  color: #ffffff !important;
}

.o_menu_sidebar .o_menu_sections .badge {
  background: rgba(255, 255, 255, 0.15) !important;
  color: #ffffff !important;
}

/* =========================
   SEARCH BAR / FILTER CHIPS
   ========================= */
.o_searchview .o_searchview_facet .o_facet_value,
.o_searchview .o_searchview_facet .o_searchview_facet_label {
  background: rgba(123, 74, 154, 0.15) !important;
  color: $brand_dark !important;
}

.o_searchview .o_searchview_facet .o_facet_remove {
  color: $brand !important;
}

.o_searchview .o_searchview_facet .o_facet_remove:hover {
  color: $brand_dark !important;
}

.o_searchview_dropdown .dropdown-menu,
.o_searchview .o_dropdown_menu {
  border-color: rgba(123, 74, 154, 0.2) !important;
}

/* =========================
   VIEW SWITCHER / TABS
   ========================= */
.o_view_switcher .btn.active,
.nav-tabs .nav-link.active,
.nav-tabs .nav-link:focus,
.nav-tabs .nav-link:hover {
  border-color: $brand !important;
  color: #ffffff !important;
  background-color: $brand !important;
}

/* Make tab separators subtle */
.nav-tabs {
  border-bottom: 1px solid rgba(123, 74, 154, 0.3) !important;
}

/* =========================
   STATUSBAR + STEPPERS
   ========================= */
.o_form_statusbar .o_statusbar_status > .o_arrow_button {
  border-color: rgba(123, 74, 154, 0.4) !important;
  color: $brand !important;
}

.o_form_statusbar .o_statusbar_status > .o_arrow_button,
.o_progressbar .o_progressbar_title {
  background: rgba(123, 74, 154, 0.08) !important;
}

.o_form_statusbar .o_statusbar_status > .o_arrow_button.o_arrow_button_current,
.o_form_statusbar .o_statusbar_status > .o_arrow_button:hover {
  background: $brand !important;
  color: #ffffff !important;
}

.o_progressbar .o_progressbar_value {
  background: $brand !important;
}

/* =========================
   KANBAN + CARDS
   ========================= */
.o_kanban_view .o_kanban_group {
  border-top: 3px solid $brand !important;
}

.o_kanban_view .o_kanban_header,
.o_kanban_view .o_kanban_counter {
  color: $brand !important;
}

.o_kanban_view .oe_kanban_color_0 .o_kanban_record,
.o_kanban_view .oe_kanban_card {
  box-shadow: 0 6px 12px rgba(123, 74, 154, 0.08) !important;
}

.o_kanban_view .o_kanban_quick_add .btn-primary {
  background-color: $brand !important;
  border-color: $brand !important;
}

/* =========================
   CHATTER / DISCUSS
   ========================= */
.o_ChatterTopbar,
.o_ChatterTopbar .o_ChatterButton {
  background: rgba(123, 74, 154, 0.08) !important;
  color: $brand !important;
}

.o_ChatterTopbar .o_ChatterButton:hover,
.o_ChatterTopbar .o_ChatterButton:focus {
  background: $brand !important;
  color: #ffffff !important;
}

.o_ChatterTopbar .o_ChatterTopbar_buttonSend {
  background: $brand !important;
  border-color: $brand !important;
  color: #ffffff !important;
}

.o_DiscussSidebar,
.o_DiscussSidebar .o_DiscussSidebarItem.o-active {
  background: $sidebar_bg !important;
  color: $text_on_dark !important;
}

.o_DiscussSidebar .o_DiscussSidebarItem:hover {
  background: rgba(255, 255, 255, 0.1) !important;
}

/* =========================
   HOME MENU / LAUNCHER
   ========================= */
.o_home_menu {
  background: radial-gradient(circle at top, rgba(123, 74, 154, 0.15), transparent 65%) !important;
}

.o_home_menu .o_app {
  border: 1px solid rgba(123, 74, 154, 0.2) !important;
  box-shadow: 0 8px 18px rgba(123, 74, 154, 0.15) !important;
}

.o_home_menu .o_app .o_app_icon {
  background: $brand !important;
  color: #ffffff !important;
}

.o_home_menu .o_app:hover {
  border-color: $brand !important;
}

/* =========================
   MODALS / POPOVERS
   ========================= */
.modal-header,
.popover-header {
  background: $brand !important;
  color: #ffffff !important;
}

.modal-header .btn-close {
  filter: brightness(0) invert(1);
}

.modal-footer .btn-primary {
  background: $brand !important;
  border-color: $brand !important;
}

/* =========================
   LIST / TABLE HEADERS
   ========================= */
.o_list_view th,
.o_kanban_group_title {
  color: $brand_dark !important;
}

.table thead th {
  border-bottom: 2px solid rgba(123, 74, 154, 0.3) !important;
}

.o_list_view .o_list_table .o_data_row.o_selected td {
  box-shadow: inset 0 0 0 999px rgba(123, 74, 154, 0.08) !important;
}

/* =========================
   PIVOT / GRAPH / DASHBOARD
   ========================= */
.o_pivot_table thead th,
.o_pivot_table tbody th {
  background: rgba(123, 74, 154, 0.05) !important;
  color: $brand_dark !important;
}

.o_graph_controller .o_cp_buttons .btn,
.o_pivot_buttons .btn {
  color: $brand !important;
}

.o_graph_controller .o_cp_buttons .btn:hover,
.o_pivot_buttons .btn:hover {
  background: rgba(123, 74, 154, 0.1) !important;
}

.o_dashboard .o_dashboard_graph .o_graph_title {
  color: $brand !important;
}

/* =========================
   FIX: NOTEBOOK (Form Tabs) COLORS
   ========================= */

/* Base (inactive tabs) */
.o_notebook .nav-tabs .nav-link,
.o_notebook .nav-tabs button.nav-link {
  background: transparent !important;
  color: $brand !important;
  border-color: transparent !important;
}

/* Hover (inactive) */
.o_notebook .nav-tabs .nav-link:hover,
.o_notebook .nav-tabs button.nav-link:hover {
  background: rgba(123, 74, 154, 0.08) !important;
  color: $brand_dark !important;
}

/* Active tab (only active should be brand bg) */
.o_notebook .nav-tabs .nav-link.active,
.o_notebook .nav-tabs .nav-link.active:hover,
.o_notebook .nav-tabs .nav-link.active:focus,
.o_notebook .nav-tabs button.nav-link.active,
.o_notebook .nav-tabs button.nav-link.active:hover,
.o_notebook .nav-tabs button.nav-link.active:focus {
  background: $brand !important;
  color: #ffffff !important;
  border-color: $brand !important;
}

/* Tab bottom border line */
.o_notebook .nav-tabs {
  border-bottom: 1px solid rgba(123, 74, 154, 0.25) !important;
}



/* =========================
   FIX: MODAL (Popup) look + close button
   ========================= */

.modal-header,
.o_dialog .modal-header {
  background: $brand !important;
  color: #ffffff !important;
  border-bottom: 0 !important;
}

/* Title text */
.modal-header .modal-title,
.o_dialog .modal-header .modal-title {
  color: #ffffff !important;
}

/* Close (X) visible on purple */
.modal-header .btn-close,
.o_dialog .modal-header .btn-close,
.modal-header .close,
.o_dialog .modal-header .close {
  filter: brightness(0) invert(1) !important;
  opacity: 0.9 !important;
}

.modal-header .btn-close:hover,
.o_dialog .modal-header .btn-close:hover {
  opacity: 1 !important;
}

/* Modal body keep normal */
.modal-body,
.o_dialog .modal-body {
  background: #ffffff !important;
  color: #111827 !important;
}

/* Footer buttons spacing */
.modal-footer,
.o_dialog .modal-footer {
  background: #ffffff !important;
  border-top: 1px solid rgba(0, 0, 0, 0.08) !important;
}

/* Primary button in modal */
.modal-footer .btn-primary,
.o_dialog .modal-footer .btn-primary {
  background: $brand !important;
  border-color: $brand !important;
  color: #ffffff !important;
}

.modal-footer .btn-primary:hover,
.o_dialog .modal-footer .btn-primary:hover {
  background: $brand_dark !important;
  border-color: $brand_dark !important;
}

/* Secondary button */
.modal-footer .btn-secondary,
.o_dialog .modal-footer .btn-secondary {
  background: #e5e7eb !important;
  border-color: #e5e7eb !important;
  color: #111827 !important;
}
